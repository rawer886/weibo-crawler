# 项目原则

## 数据原则

### 不浪费已返回的数据
- 配置中的 `max_xxx` 参数用于**控制请求次数/翻页次数**
- 如果一次请求返回的数据超过配置的数量，**全部存储**，不截断
- 例如：`max_comments_per_post: 10` 表示"期望获取10条"，但如果一页返回了20条，就存20条

### 减少请求，降低风控
- 使用持久化缓存：历史数据不会变，只请求一次
- 第一页不缓存：需要检查新内容
- 已抓取过的数据跳过：评论、微博等

## 缓存策略

| 数据类型 | 缓存策略 |
|----------|----------|
| 博主信息 | 永久缓存 |
| 微博列表（第一页） | 不缓存（检查新微博） |
| 微博列表（历史页） | 永久缓存 |
| 评论 | 数据库去重，不重复获取 |

## 增量抓取

- `--mode new`: 从最新开始，遇到已入库的停止
- `--mode history`: 从上次最老的位置继续向后
- `--mode all`: 先 new 再 history
