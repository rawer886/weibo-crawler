# Tests 目录

该目录包含用于测试爬虫功能的测试脚本。

## 可用测试

### test_single_post.py
测试单条微博的评论抓取功能。

**用法：**
```bash
source venv/bin/activate
python tests/test_single_post.py <博主UID> <微博ID>
```

**示例：**
```bash
python tests/test_single_post.py 2014433131 5253489136775271
```

**功能：**
- 启动浏览器并检查登录状态
- 抓取指定微博的评论（包括主评论和子评论）
- 正确识别评论的回复关系
- 显示每条评论的详细信息
- 保存评论到数据库

**输出示例：**
```
获取到 15 条评论

评论: 不出轨了
  内容: 有我一个ST归零的奉献
  UID: 6760432491
  是否博主: False
  回复给: None (UID: None)
  回复内容: None

评论: 唐史主任司马迁
  内容: 出清还要死一批
  UID: 2014433131
  是否博主: True
  回复给: 不出轨了 (UID: 6760432491)
  回复内容: 有我一个ST归零的奉献

成功保存 15 条评论
```

**注意：**
- 需要先激活虚拟环境
- 需要浏览器登录微博（第一次运行时）
- 会打开浏览器窗口（headless=False）
